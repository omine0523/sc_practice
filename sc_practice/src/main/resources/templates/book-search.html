<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>書籍検索画面</title>
	<!-- style -->
	<link rel="stylesheet" th:href="@{/css/book-search.css}">
</head>


<body>
	<h2>書籍検索</h2>

	<!-- フィルターエリア -->
	<div class="filter-area">
		<form th:object="${bookSearchForm}" method="get">
			<label>書籍ID：</label>
			<input type="text" th:field="*{bookId}" placeholder="数字を入力">

			<!-- 仮実装：時間があればジャンル・棚検索実装予定 -->
			<label>ジャンル：</label>
			<select th:field="*{genre}">
				<option value="">-- 全て --</option>
				<option value="SF">SF</option>
				<option value="恋愛">恋愛</option>
				<option value="図鑑">図鑑</option>
			</select>

			<label>置き場所：</label>
			<select th:field="*{storageLocation}">
				<option value="">-- 全て --</option>
				<option value="A棚">A棚</option>
				<option value="B棚">B棚</option>
				<option value="C棚">C棚</option>
			</select>

			<button class="btn" name="search" type="submit">検索</button>

			<!-- エラーがある場合 メッセージをcontrollerから受け取り表示 -->
			<div th:if="${infoMsg}" th:text="${infoMsg}" class="info"></div>
			<!-- エラーがある場合 メッセージをcontrollerから受け取り表示 -->
			<div th:if="${#fields.hasErrors('bookId')}" th:errors="*{bookId}" class="error"></div>
		</form>
		<br>
	</div>

	<!-- 書籍検索 検索結果をリストで表示 -->
	<table>
		<thead>
			<tr>
				<th>ID</th>
				<th>書籍名</th>
				<th>ジャンル</th>
				<th>置き場所</th>
				<th>ステータス</th>
				<th>詳細</th>
			</tr>
		</thead>
		<tbody>
			<!-- 検索結果が(resultBook)が null ではなく、かつ、中身が空のリストだった場合に表示する -->
			<tr th:if="${resultBook != null and #lists.isEmpty(resultBook)}">
				<td colspan="6">該当する書籍はありません</td>
			</tr>

			<!-- テーブルから取得した書籍情報を下記の項目に合わせて表示する  -->
			<tr th:each="book : ${resultBook}">
				<td th:text="${book.bookId}">ID</td>
				<td th:text="${book.bookName}">書籍名</td>
				<td th:text="${book.genre}">ジャンル</td>
				<td th:text="${book.storageLocation}">置き場所</td>
				<td th:text="${book.status}">ステータス</td>
				<td>
					<a href="#">詳細</a>
				</td>
			</tr>
		</tbody>
	</table>

</body>

</html>